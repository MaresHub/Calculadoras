<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculadora Quântica Multidimensional</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: #000;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        position: relative;
        perspective: 2000px;
      }

      /* SIMULAÇÃO DE UNIVERSO QUÂNTICO */
      .quantum-universe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 10% 20%,
            rgba(120, 119, 198, 0.3) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(255, 119, 198, 0.3) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 40%,
            rgba(120, 255, 198, 0.3) 0%,
            transparent 50%
          ),
          conic-gradient(
            from 0deg at 50% 50%,
            #000428,
            #004e92,
            #009ffd,
            #00d2ff,
            #000428
          );
        animation: universeExpansion 30s ease-in-out infinite;
      }

      @keyframes universeExpansion {
        0%,
        100% {
          transform: scale(1) rotate(0deg);
          filter: hue-rotate(0deg) brightness(1) contrast(1);
        }
        25% {
          transform: scale(1.1) rotate(90deg);
          filter: hue-rotate(90deg) brightness(1.3) contrast(1.2);
        }
        50% {
          transform: scale(0.9) rotate(180deg);
          filter: hue-rotate(180deg) brightness(0.8) contrast(1.5);
        }
        75% {
          transform: scale(1.05) rotate(270deg);
          filter: hue-rotate(270deg) brightness(1.1) contrast(1.1);
        }
      }

      /* BURACO NEGRO SIMULADO */
      .black-hole {
        position: absolute;
        top: 20%;
        right: 10%;
        width: 200px;
        height: 200px;
        background: radial-gradient(
          circle,
          transparent 30%,
          rgba(0, 0, 0, 0.9) 50%,
          transparent 70%
        );
        border-radius: 50%;
        animation: blackHoleRotation 8s linear infinite;
        filter: blur(2px);
      }

      .black-hole::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(
          from 0deg,
          transparent,
          #ff6b35,
          #f7931e,
          #ffcd3c,
          transparent
        );
        border-radius: 50%;
        animation: accretionDisk 3s linear infinite;
      }

      @keyframes blackHoleRotation {
        0% {
          transform: rotate(0deg) scale(1);
        }
        50% {
          transform: rotate(180deg) scale(1.2);
        }
        100% {
          transform: rotate(360deg) scale(1);
        }
      }

      @keyframes accretionDisk {
        0% {
          transform: rotate(0deg);
          opacity: 0.8;
        }
        100% {
          transform: rotate(360deg);
          opacity: 0.8;
        }
      }

      /* SIMULAÇÃO DE PARTÍCULAS QUÂNTICAS */
      .quantum-field {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }

      .quantum-particle {
        position: absolute;
        width: 3px;
        height: 3px;
        background: #fff;
        border-radius: 50%;
        box-shadow: 0 0 10px currentColor;
      }

      /* ONDAS GRAVITACIONAIS */
      .gravitational-waves {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 100px;
        height: 100px;
        transform: translate(-50%, -50%);
      }

      .wave-ring {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: 1px solid rgba(0, 255, 255, 0.3);
        border-radius: 50%;
        animation: gravitationalWave 4s ease-out infinite;
      }

      .wave-ring:nth-child(2) {
        animation-delay: 1s;
      }
      .wave-ring:nth-child(3) {
        animation-delay: 2s;
      }
      .wave-ring:nth-child(4) {
        animation-delay: 3s;
      }

      @keyframes gravitationalWave {
        0% {
          transform: scale(0);
          opacity: 1;
          border-width: 3px;
        }
        100% {
          transform: scale(20);
          opacity: 0;
          border-width: 0px;
        }
      }

      /* SIMULAÇÃO DE PLASMA ENERGÉTICO */
      .plasma-field {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            ellipse at top,
            rgba(255, 0, 150, 0.1),
            transparent
          ),
          radial-gradient(
            ellipse at bottom,
            rgba(0, 255, 150, 0.1),
            transparent
          );
        animation: plasmaFlow 6s ease-in-out infinite;
      }

      @keyframes plasmaFlow {
        0%,
        100% {
          background-position: 0% 0%, 100% 100%;
          filter: hue-rotate(0deg);
        }
        50% {
          background-position: 100% 100%, 0% 0%;
          filter: hue-rotate(180deg);
        }
      }

      /* CALCULADORA QUÂNTICA */
      .quantum-calculator {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(50px);
        border-radius: 40px;
        padding: 50px;
        box-shadow: 0 100px 200px rgba(0, 0, 0, 0.8),
          inset 0 1px 0 rgba(255, 255, 255, 0.1),
          0 0 200px rgba(139, 92, 246, 0.4), 0 0 100px rgba(0, 255, 255, 0.3);
        border: 3px solid transparent;
        background-clip: padding-box;
        animation: quantumFloat 10s ease-in-out infinite;
        position: relative;
        z-index: 100;
        max-width: 500px;
        width: 100%;
        transform-style: preserve-3d;
      }

      @keyframes quantumFloat {
        0%,
        100% {
          transform: translateY(0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);
          filter: drop-shadow(0 50px 100px rgba(139, 92, 246, 0.5));
        }
        25% {
          transform: translateY(-20px) rotateX(5deg) rotateY(5deg) rotateZ(1deg);
          filter: drop-shadow(0 70px 120px rgba(0, 255, 255, 0.5));
        }
        50% {
          transform: translateY(-10px) rotateX(-3deg) rotateY(-3deg)
            rotateZ(-1deg);
          filter: drop-shadow(0 60px 110px rgba(255, 0, 255, 0.5));
        }
        75% {
          transform: translateY(-15px) rotateX(3deg) rotateY(-5deg)
            rotateZ(2deg);
          filter: drop-shadow(0 65px 115px rgba(255, 255, 0, 0.5));
        }
      }

      /* CAMPO DE FORÇA PROTETOR */
      .force-field {
        position: absolute;
        top: -30px;
        left: -30px;
        right: -30px;
        bottom: -30px;
        border: 2px solid transparent;
        border-radius: 45px;
        background: linear-gradient(
            45deg,
            #00f5ff,
            #ff00ff,
            #00ff00,
            #ffff00,
            #00f5ff
          )
          border-box;
        mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
        mask-composite: exclude;
        animation: forceFieldPulse 5s ease-in-out infinite;
      }

      @keyframes forceFieldPulse {
        0%,
        100% {
          transform: scale(1) rotate(0deg);
          opacity: 0.6;
          filter: blur(0px);
        }
        50% {
          transform: scale(1.05) rotate(180deg);
          opacity: 1;
          filter: blur(1px);
        }
      }

      /* DISPLAY HOLOGRÁFICO AVANÇADO */
      .holographic-display {
        background: rgba(0, 0, 0, 0.9);
        border-radius: 25px;
        padding: 40px;
        margin-bottom: 40px;
        position: relative;
        overflow: hidden;
        border: 2px solid rgba(0, 255, 255, 0.5);
        transform-style: preserve-3d;
      }

      /* SIMULAÇÃO DE TELETRANSPORTE */
      .teleport-effect {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: conic-gradient(
            from 0deg,
            transparent,
            #00ffff,
            transparent,
            #ff00ff,
            transparent
          ),
          radial-gradient(
            circle,
            transparent 40%,
            rgba(255, 255, 255, 0.1) 50%,
            transparent 60%
          );
        animation: teleportScan 8s linear infinite;
        border-radius: 25px;
      }

      @keyframes teleportScan {
        0% {
          transform: rotate(0deg) scale(0.8);
          opacity: 0.3;
        }
        50% {
          transform: rotate(180deg) scale(1.2);
          opacity: 0.8;
        }
        100% {
          transform: rotate(360deg) scale(0.8);
          opacity: 0.3;
        }
      }

      /* INTERFERÊNCIA QUÂNTICA */
      .quantum-interference {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: repeating-linear-gradient(
          45deg,
          transparent,
          transparent 2px,
          rgba(0, 255, 255, 0.02) 2px,
          rgba(0, 255, 255, 0.02) 4px
        );
        animation: interferencePattern 0.5s linear infinite;
      }

      @keyframes interferencePattern {
        0% {
          transform: translateX(0px) translateY(0px);
        }
        100% {
          transform: translateX(4px) translateY(4px);
        }
      }

      .quantum-result {
        color: #00ffff;
        font-size: 3.5rem;
        font-weight: 200;
        text-align: right;
        min-height: 100px;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        word-break: break-all;
        text-shadow: 0 0 20px currentColor, 0 0 40px currentColor,
          0 0 80px currentColor, 0 0 160px currentColor;
        position: relative;
        z-index: 10;
        animation: quantumGlow 3s ease-in-out infinite alternate;
      }

      @keyframes quantumGlow {
        0% {
          text-shadow: 0 0 20px #00ffff, 0 0 40px #00ffff, 0 0 80px #00ffff;
          transform: scale(1);
        }
        100% {
          text-shadow: 0 0 30px #ff00ff, 0 0 60px #ff00ff, 0 0 120px #ff00ff,
            0 0 240px #ff00ff;
          transform: scale(1.02);
        }
      }

      .quantum-expression {
        color: rgba(0, 255, 255, 0.8);
        font-size: 1.4rem;
        text-align: right;
        margin-bottom: 20px;
        min-height: 30px;
        text-shadow: 0 0 20px currentColor;
      }

      /* BOTÕES COM FÍSICA QUÂNTICA */
      .quantum-buttons {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 25px;
      }

      .quantum-btn {
        background: rgba(255, 255, 255, 0.05);
        border: none;
        border-radius: 25px;
        color: #fff;
        font-size: 1.4rem;
        font-weight: 700;
        height: 90px;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(20px);
        border: 2px solid rgba(255, 255, 255, 0.1);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        transform-style: preserve-3d;
      }

      /* EXPLOSÃO NUCLEAR SIMULADA */
      .nuclear-explosion {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(
          circle,
          #ffffff 0%,
          #ffff00 20%,
          #ff6600 40%,
          #ff0000 60%,
          #990000 80%,
          transparent 100%
        );
        border-radius: 50%;
        transform: translate(-50%, -50%);
        opacity: 0;
      }

      .quantum-btn:active .nuclear-explosion {
        animation: nuclearBlast 1s ease-out;
      }

      @keyframes nuclearBlast {
        0% {
          width: 0;
          height: 0;
          opacity: 0;
        }
        10% {
          width: 50px;
          height: 50px;
          opacity: 1;
        }
        30% {
          width: 200px;
          height: 200px;
          opacity: 0.8;
        }
        60% {
          width: 400px;
          height: 400px;
          opacity: 0.4;
        }
        100% {
          width: 600px;
          height: 600px;
          opacity: 0;
        }
      }

      /* CAMPO MAGNÉTICO SIMULADO */
      .magnetic-field {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: repeating-conic-gradient(
          from 0deg at 50% 50%,
          transparent 0deg,
          rgba(0, 255, 255, 0.1) 10deg,
          transparent 20deg
        );
        animation: magneticRotation 4s linear infinite;
        border-radius: 25px;
      }

      @keyframes magneticRotation {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .quantum-btn:hover {
        transform: translateY(-10px) scale(1.1) rotateX(15deg) rotateY(5deg);
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.6),
          0 0 100px rgba(139, 92, 246, 0.8),
          inset 0 1px 0 rgba(255, 255, 255, 0.4);
        background: rgba(255, 255, 255, 0.15);
      }

      /* ANTIMATÉRIA SIMULADA */
      .antimatter-effect {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          45deg,
          rgba(255, 255, 255, 0.1) 0%,
          rgba(0, 0, 0, 0.1) 50%,
          rgba(255, 255, 255, 0.1) 100%
        );
        animation: antimatterFlux 2s ease-in-out infinite alternate;
        border-radius: 25px;
      }

      @keyframes antimatterFlux {
        0% {
          background-position: 0% 0%;
          filter: invert(0);
        }
        100% {
          background-position: 100% 100%;
          filter: invert(0.2);
        }
      }

      /* FUSÃO NUCLEAR VISUAL */
      .fusion-core {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 20px;
        height: 20px;
        background: radial-gradient(circle, #ffffff, #ffff00, #ff6600);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        animation: fusionPulse 1s ease-in-out infinite;
        box-shadow: 0 0 20px #ffff00, 0 0 40px #ff6600, 0 0 80px #ff0000;
      }

      @keyframes fusionPulse {
        0%,
        100% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 0.8;
        }
        50% {
          transform: translate(-50%, -50%) scale(1.5);
          opacity: 1;
        }
      }

      /* DISTORÇÃO ESPAÇO-TEMPO */
      .spacetime-distortion {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
          ellipse at center,
          transparent 30%,
          rgba(139, 92, 246, 0.1) 50%,
          transparent 70%
        );
        animation: spacetimeWarp 6s ease-in-out infinite;
        border-radius: 25px;
      }

      @keyframes spacetimeWarp {
        0%,
        100% {
          transform: scale(1) skew(0deg, 0deg);
          filter: blur(0px);
        }
        25% {
          transform: scale(1.1) skew(2deg, 1deg);
          filter: blur(1px);
        }
        50% {
          transform: scale(0.9) skew(-2deg, -1deg);
          filter: blur(2px);
        }
        75% {
          transform: scale(1.05) skew(1deg, -2deg);
          filter: blur(1px);
        }
      }

      /* BOTÕES ESPECIAIS COM EFEITOS ÚNICOS */
      .btn-operator {
        background: linear-gradient(135deg, #ff6b6b, #ee5a24, #ff6b6b);
        background-size: 300% 300%;
        animation: operatorPulse 4s ease infinite;
        box-shadow: 0 0 50px rgba(255, 107, 107, 0.6);
      }

      @keyframes operatorPulse {
        0%,
        100% {
          background-position: 0% 50%;
          transform: scale(1);
        }
        50% {
          background-position: 100% 50%;
          transform: scale(1.02);
        }
      }

      .btn-equals {
        background: linear-gradient(135deg, #00d2d3, #54a0ff, #00d2d3);
        background-size: 300% 300%;
        animation: equalsEnergy 4s ease infinite;
        grid-column: span 2;
        box-shadow: 0 0 50px rgba(0, 210, 211, 0.6);
      }

      @keyframes equalsEnergy {
        0%,
        100% {
          background-position: 0% 50%;
          box-shadow: 0 0 50px rgba(0, 210, 211, 0.6);
        }
        50% {
          background-position: 100% 50%;
          box-shadow: 0 0 100px rgba(0, 210, 211, 1);
        }
      }

      .btn-clear {
        background: linear-gradient(135deg, #ffa726, #ff7043, #ffa726);
        background-size: 300% 300%;
        animation: clearWave 4s ease infinite;
        box-shadow: 0 0 50px rgba(255, 167, 38, 0.6);
      }

      @keyframes clearWave {
        0%,
        100% {
          background-position: 0% 50%;
          filter: hue-rotate(0deg);
        }
        50% {
          background-position: 100% 50%;
          filter: hue-rotate(30deg);
        }
      }

      .btn-zero {
        grid-column: span 2;
      }

      /* EFEITO DE SINGULARIDADE */
      .singularity {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 5px;
        height: 5px;
        background: #ffffff;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0 0 20px #ffffff, 0 0 40px #00ffff, 0 0 80px #ff00ff;
        animation: singularityPulse 2s ease-in-out infinite;
      }

      @keyframes singularityPulse {
        0%,
        100% {
          transform: translate(-50%, -50%) scale(1);
          box-shadow: 0 0 20px #ffffff, 0 0 40px #00ffff, 0 0 80px #ff00ff;
        }
        50% {
          transform: translate(-50%, -50%) scale(3);
          box-shadow: 0 0 40px #ffffff, 0 0 80px #00ffff, 0 0 160px #ff00ff,
            0 0 320px #ffff00;
        }
      }

      /* RESPONSIVIDADE QUÂNTICA */
      @media (max-width: 480px) {
        .quantum-calculator {
          margin: 20px;
          padding: 30px;
        }

        .quantum-result {
          font-size: 2.8rem;
        }

        .quantum-btn {
          height: 80px;
          font-size: 1.3rem;
        }
      }

      /* EFEITO DE MULTIVERSO */
      .multiverse-layer {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          45deg,
          rgba(255, 0, 150, 0.05) 0%,
          transparent 25%,
          rgba(0, 255, 150, 0.05) 50%,
          transparent 75%,
          rgba(150, 0, 255, 0.05) 100%
        );
        animation: multiverseShift 12s ease-in-out infinite;
        pointer-events: none;
      }

      @keyframes multiverseShift {
        0%,
        100% {
          transform: translateX(0%) translateY(0%) rotate(0deg);
          opacity: 0.3;
        }
        33% {
          transform: translateX(10%) translateY(-5%) rotate(120deg);
          opacity: 0.6;
        }
        66% {
          transform: translateX(-5%) translateY(10%) rotate(240deg);
          opacity: 0.4;
        }
      }
    </style>
  </head>
  <body>
    <div class="quantum-universe"></div>
    <div class="plasma-field"></div>
    <div class="multiverse-layer"></div>
    <div class="black-hole"></div>
    <div class="gravitational-waves">
      <div class="wave-ring"></div>
      <div class="wave-ring"></div>
      <div class="wave-ring"></div>
      <div class="wave-ring"></div>
    </div>
    <div class="quantum-field" id="quantumField"></div>

    <div class="quantum-calculator">
      <div class="force-field"></div>

      <div class="holographic-display">
        <div class="teleport-effect"></div>
        <div class="quantum-interference"></div>
        <div class="spacetime-distortion"></div>
        <div class="quantum-expression" id="expression"></div>
        <div class="quantum-result" id="result">0</div>
      </div>

      <div class="quantum-buttons">
        <button class="quantum-btn btn-clear" onclick="clearAll()">
          C
          <div class="nuclear-explosion"></div>
          <div class="magnetic-field"></div>
          <div class="antimatter-effect"></div>
        </button>
        <button class="quantum-btn btn-clear" onclick="clearEntry()">
          CE
          <div class="nuclear-explosion"></div>
          <div class="fusion-core"></div>
        </button>
        <button class="quantum-btn btn-operator" onclick="deleteLast()">
          ⌫
          <div class="nuclear-explosion"></div>
          <div class="singularity"></div>
        </button>
        <button class="quantum-btn btn-operator" onclick="inputOperator('/')">
          /
          <div class="nuclear-explosion"></div>
          <div class="magnetic-field"></div>
        </button>

        <button class="quantum-btn" onclick="inputNumber('7')">
          7
          <div class="nuclear-explosion"></div>
          <div class="antimatter-effect"></div>
        </button>
        <button class="quantum-btn" onclick="inputNumber('8')">
          8
          <div class="nuclear-explosion"></div>
          <div class="fusion-core"></div>
        </button>
        <button class="quantum-btn" onclick="inputNumber('9')">
          9
          <div class="nuclear-explosion"></div>
          <div class="spacetime-distortion"></div>
        </button>
        <button class="quantum-btn btn-operator" onclick="inputOperator('*')">
          ×
          <div class="nuclear-explosion"></div>
          <div class="singularity"></div>
        </button>

        <button class="quantum-btn" onclick="inputNumber('4')">
          4
          <div class="nuclear-explosion"></div>
          <div class="magnetic-field"></div>
        </button>
        <button class="quantum-btn" onclick="inputNumber('5')">
          5
          <div class="nuclear-explosion"></div>
          <div class="antimatter-effect"></div>
        </button>
        <button class="quantum-btn" onclick="inputNumber('6')">
          6
          <div class="nuclear-explosion"></div>
          <div class="fusion-core"></div>
        </button>
        <button class="quantum-btn btn-operator" onclick="inputOperator('-')">
          -
          <div class="nuclear-explosion"></div>
          <div class="spacetime-distortion"></div>
        </button>

        <button class="quantum-btn" onclick="inputNumber('1')">
          1
          <div class="nuclear-explosion"></div>
          <div class="singularity"></div>
        </button>
        <button class="quantum-btn" onclick="inputNumber('2')">
          2
          <div class="nuclear-explosion"></div>
          <div class="magnetic-field"></div>
        </button>
        <button class="quantum-btn" onclick="inputNumber('3')">
          3
          <div class="nuclear-explosion"></div>
          <div class="antimatter-effect"></div>
        </button>
        <button class="quantum-btn btn-operator" onclick="inputOperator('+')">
          +
          <div class="nuclear-explosion"></div>
          <div class="fusion-core"></div>
        </button>

        <button class="quantum-btn btn-zero" onclick="inputNumber('0')">
          0
          <div class="nuclear-explosion"></div>
          <div class="spacetime-distortion"></div>
        </button>
        <button class="quantum-btn" onclick="inputDecimal()">
          .
          <div class="nuclear-explosion"></div>
          <div class="singularity"></div>
        </button>
        <button class="quantum-btn btn-equals" onclick="calculate()">
          =
          <div class="nuclear-explosion"></div>
          <div class="magnetic-field"></div>
          <div class="fusion-core"></div>
        </button>
      </div>
    </div>

    <script>
      let currentInput = "0";
      let expression = "";
      let shouldResetDisplay = false;

      const resultDisplay = document.getElementById("result");
      const expressionDisplay = document.getElementById("expression");

      // SIMULAÇÃO DE FÍSICA QUÂNTICA
      class QuantumParticle {
        constructor() {
          this.x = Math.random() * window.innerWidth;
          this.y = Math.random() * window.innerHeight;
          this.vx = (Math.random() - 0.5) * 2;
          this.vy = (Math.random() - 0.5) * 2;
          this.energy = Math.random() * 100;
          this.spin = Math.random() * 360;
          this.entangled = null;
          this.waveFunction = 0;
          this.element = this.createElement();
        }

        createElement() {
          const particle = document.createElement("div");
          particle.className = "quantum-particle";
          particle.style.left = this.x + "px";
          particle.style.top = this.y + "px";

          // Cor baseada na energia
          const hue = (this.energy * 3.6) % 360;
          particle.style.background = `hsl(${hue}, 100%, 50%)`;
          particle.style.boxShadow = `0 0 ${
            this.energy / 5
          }px hsl(${hue}, 100%, 50%)`;

          return particle;
        }

        update() {
          // Simulação de mecânica quântica
          this.waveFunction += 0.1;

          // Movimento baseado em probabilidade quântica
          const probability = Math.sin(this.waveFunction) * 0.5 + 0.5;
          this.vx += (Math.random() - 0.5) * probability;
          this.vy += (Math.random() - 0.5) * probability;

          // Aplicar incerteza de Heisenberg
          this.x += this.vx + Math.sin(this.waveFunction) * 2;
          this.y += this.vy + Math.cos(this.waveFunction) * 2;

          // Túnel quântico nas bordas
          if (this.x < 0) this.x = window.innerWidth;
          if (this.x > window.innerWidth) this.x = 0;
          if (this.y < 0) this.y = window.innerHeight;
          if (this.y > window.innerHeight) this.y = 0;

          // Emaranhamento quântico
          if (this.entangled) {
            const distance = Math.sqrt(
              Math.pow(this.x - this.entangled.x, 2) +
                Math.pow(this.y - this.entangled.y, 2)
            );

            if (distance > 200) {
              // Ação fantasmagórica à distância
              this.entangled.vx = -this.vx;
              this.entangled.vy = -this.vy;
            }
          }

          // Atualizar posição visual
          this.element.style.left = this.x + "px";
          this.element.style.top = this.y + "px";
          this.element.style.transform = `rotate(${this.spin}deg) scale(${
            probability + 0.5
          })`;

          // Atualizar energia
          this.energy = (this.energy + Math.random() * 2 - 1) % 100;
          if (this.energy < 0) this.energy = 100;

          const hue = (this.energy * 3.6) % 360;
          this.element.style.background = `hsl(${hue}, 100%, 50%)`;
          this.element.style.boxShadow = `0 0 ${
            this.energy / 3
          }px hsl(${hue}, 100%, 50%)`;
        }
      }

      // Criar campo quântico
      const quantumParticles = [];
      const quantumField = document.getElementById("quantumField");

      function initQuantumField() {
        for (let i = 0; i < 200; i++) {
          const particle = new QuantumParticle();
          quantumParticles.push(particle);
          quantumField.appendChild(particle.element);

          // Criar emaranhamento quântico
          if (i > 0 && Math.random() < 0.1) {
            particle.entangled =
              quantumParticles[Math.floor(Math.random() * i)];
            quantumParticles[Math.floor(Math.random() * i)].entangled =
              particle;
          }
        }
      }

      function updateQuantumField() {
        quantumParticles.forEach((particle) => particle.update());
        requestAnimationFrame(updateQuantumField);
      }

      // SIMULAÇÃO DE BIG BANG EM MINIATURA
      function createBigBang(x, y) {
        const bigBang = document.createElement("div");
        bigBang.style.position = "fixed";
        bigBang.style.left = x + "px";
        bigBang.style.top = y + "px";
        bigBang.style.width = "0px";
        bigBang.style.height = "0px";
        bigBang.style.background =
          "radial-gradient(circle, #ffffff, #ffff00, #ff6600, #ff0000, #000000)";
        bigBang.style.borderRadius = "50%";
        bigBang.style.zIndex = "10000";
        bigBang.style.pointerEvents = "none";

        document.body.appendChild(bigBang);

        // Expansão do universo
        let size = 0;
        const expandUniverse = () => {
          size += 20;
          bigBang.style.width = size + "px";
          bigBang.style.height = size + "px";
          bigBang.style.left = x - size / 2 + "px";
          bigBang.style.top = y - size / 2 + "px";
          bigBang.style.opacity = 1 - size / 1000;

          if (size < 1000) {
            requestAnimationFrame(expandUniverse);
          } else {
            bigBang.remove();
          }
        };

        expandUniverse();
      }

      // EFEITO DE MORPHING DIMENSIONAL
      function morphDimensionalNumber(element, newText) {
        element.innerHTML = "";

        for (let i = 0; i < newText.length; i++) {
          const span = document.createElement("span");
          span.textContent = newText[i];
          span.style.display = "inline-block";
          span.style.animation = `dimensionalMorph 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) ${
            i * 0.1
          }s forwards`;
          element.appendChild(span);
        }
      }

      // Adicionar animação CSS para morphing dimensional
      const morphStyle = document.createElement("style");
      morphStyle.textContent = `
            @keyframes dimensionalMorph {
                0% { 
                    transform: scale(0) rotateY(180deg) rotateX(180deg) rotateZ(180deg); 
                    filter: blur(20px) hue-rotate(0deg);
                    opacity: 0;
                }
                25% { 
                    transform: scale(1.5) rotateY(90deg) rotateX(90deg) rotateZ(90deg); 
                    filter: blur(10px) hue-rotate(90deg);
                    opacity: 0.5;
                }
                50% { 
                    transform: scale(0.8) rotateY(45deg) rotateX(45deg) rotateZ(45deg); 
                    filter: blur(5px) hue-rotate(180deg);
                    opacity: 0.8;
                }
                75% { 
                    transform: scale(1.2) rotateY(22deg) rotateX(22deg) rotateZ(22deg); 
                    filter: blur(2px) hue-rotate(270deg);
                    opacity: 0.9;
                }
                100% { 
                    transform: scale(1) rotateY(0deg) rotateX(0deg) rotateZ(0deg); 
                    filter: blur(0px) hue-rotate(360deg);
                    opacity: 1;
                }
            }
        `;
      document.head.appendChild(morphStyle);

      function updateDisplay() {
        morphDimensionalNumber(resultDisplay, currentInput);

        // Criar Big Bang na posição do display
        const rect = resultDisplay.getBoundingClientRect();
        createBigBang(rect.left + rect.width / 2, rect.top + rect.height / 2);
      }

      function updateExpression() {
        expressionDisplay.textContent = expression;
      }

      function inputNumber(num) {
        if (shouldResetDisplay) {
          currentInput = "0";
          shouldResetDisplay = false;
        }

        if (currentInput === "0") {
          currentInput = num;
        } else {
          currentInput += num;
        }

        updateDisplay();
      }

      function inputDecimal() {
        if (shouldResetDisplay) {
          currentInput = "0";
          shouldResetDisplay = false;
        }

        if (!currentInput.includes(".")) {
          currentInput += ".";
          updateDisplay();
        }
      }

      function inputOperator(operator) {
        if (expression && !shouldResetDisplay) {
          calculate();
        }

        expression = currentInput + " " + operator + " ";
        updateExpression();
        shouldResetDisplay = true;
      }

      function calculate() {
        if (!expression) return;

        try {
          // Simulação de computação quântica
          const quantumStates = ["|0⟩", "|1⟩", "|+⟩", "|-⟩"];
          const randomState =
            quantumStates[Math.floor(Math.random() * quantumStates.length)];

          // Mostrar estado quântico temporariamente
          resultDisplay.textContent = `Computing in ${randomState} state...`;

          setTimeout(() => {
            const fullExpression = expression + currentInput;
            const evalExpression = fullExpression.replace(/×/g, "*");
            const result = Function(
              '"use strict"; return (' + evalExpression + ")"
            )();

            if (!isFinite(result)) {
              throw new Error("Resultado inválido");
            }

            currentInput = result.toString();
            expression = "";

            updateDisplay();
            updateExpression();

            shouldResetDisplay = true;

            // Efeito de colapso da função de onda
            resultDisplay.style.animation = "quantumCollapse 2s ease-out";
          }, 1500);
        } catch (error) {
          currentInput = "Erro Quântico";
          expression = "";
          updateDisplay();
          updateExpression();

          // Efeito de paradoxo temporal
          resultDisplay.style.animation = "temporalParadox 3s ease-in-out";
          setTimeout(() => {
            clearAll();
          }, 3000);
        }
      }

      // Adicionar animações de erro e sucesso
      const effectsStyle = document.createElement("style");
      effectsStyle.textContent = `
            @keyframes quantumCollapse {
                0% { 
                    transform: scale(1);
                    filter: blur(0px);
                }
                50% { 
                    transform: scale(1.5);
                    filter: blur(5px) hue-rotate(180deg);
                }
                100% { 
                    transform: scale(1);
                    filter: blur(0px) hue-rotate(360deg);
                }
            }
            
            @keyframes temporalParadox {
                0%, 100% { 
                    transform: scale(1) skew(0deg);
                    filter: hue-rotate(0deg) invert(0);
                }
                25% { 
                    transform: scale(1.2) skew(5deg);
                    filter: hue-rotate(90deg) invert(0.2);
                }
                50% { 
                    transform: scale(0.8) skew(-5deg);
                    filter: hue-rotate(180deg) invert(0.5);
                }
                75% { 
                    transform: scale(1.1) skew(3deg);
                    filter: hue-rotate(270deg) invert(0.3);
                }
            }
        `;
      document.head.appendChild(effectsStyle);

      function clearAll() {
        currentInput = "0";
        expression = "";
        updateDisplay();
        updateExpression();
        shouldResetDisplay = false;
      }

      function clearEntry() {
        currentInput = "0";
        updateDisplay();
      }

      function deleteLast() {
        if (currentInput.length > 1) {
          currentInput = currentInput.slice(0, -1);
        } else {
          currentInput = "0";
        }
        updateDisplay();
      }

      // Suporte a teclado com efeitos quânticos
      document.addEventListener("keydown", function (event) {
        const key = event.key;

        // Criar ondas gravitacionais para cada tecla
        const wave = document.createElement("div");
        wave.style.position = "fixed";
        wave.style.top = "50%";
        wave.style.left = "50%";
        wave.style.width = "50px";
        wave.style.height = "50px";
        wave.style.border = "3px solid #00ffff";
        wave.style.borderRadius = "50%";
        wave.style.transform = "translate(-50%, -50%) scale(0)";
        wave.style.animation = "gravitationalWave 1s ease-out";
        wave.style.pointerEvents = "none";
        wave.style.zIndex = "10000";
        document.body.appendChild(wave);

        setTimeout(() => wave.remove(), 1000);

        if (key >= "0" && key <= "9") {
          inputNumber(key);
        } else if (key === ".") {
          inputDecimal();
        } else if (key === "+") {
          inputOperator("+");
        } else if (key === "-") {
          inputOperator("-");
        } else if (key === "*") {
          inputOperator("*");
        } else if (key === "/") {
          event.preventDefault();
          inputOperator("/");
        } else if (key === "Enter" || key === "=") {
          event.preventDefault();
          calculate();
        } else if (key === "Escape") {
          clearAll();
        } else if (key === "Backspace") {
          event.preventDefault();
          deleteLast();
        }
      });

      // Vibração quântica
      function quantumVibration() {
        if (navigator.vibrate) {
          // Padrão de vibração baseado em frequências quânticas
          navigator.vibrate([100, 50, 100, 50, 200]);
        }
      }

      // Adicionar efeitos aos botões
      document.querySelectorAll(".quantum-btn").forEach((btn) => {
        btn.addEventListener("click", quantumVibration);
      });

      // Inicializar simulação quântica
      initQuantumField();
      updateQuantumField();
      updateDisplay();

      // Efeito de respiração cósmica
      setInterval(() => {
        const time = Date.now() * 0.001;
        const breathe = Math.sin(time) * 20 + 50;
        document.querySelector(
          ".quantum-calculator"
        ).style.filter = `drop-shadow(0 0 ${breathe}px rgba(139, 92, 246, 0.8)) 
                 drop-shadow(0 0 ${breathe * 1.5}px rgba(0, 255, 255, 0.6))
                 drop-shadow(0 0 ${breathe * 2}px rgba(255, 0, 255, 0.4))`;
      }, 50);

      // Simulação de energia escura
      setInterval(() => {
        const darkEnergy = document.createElement("div");
        darkEnergy.style.position = "fixed";
        darkEnergy.style.left = Math.random() * 100 + "%";
        darkEnergy.style.top = Math.random() * 100 + "%";
        darkEnergy.style.width = "2px";
        darkEnergy.style.height = "2px";
        darkEnergy.style.background = "#000";
        darkEnergy.style.borderRadius = "50%";
        darkEnergy.style.animation = "darkEnergyFlow 5s linear forwards";
        darkEnergy.style.pointerEvents = "none";
        darkEnergy.style.zIndex = "1";

        document.body.appendChild(darkEnergy);

        setTimeout(() => darkEnergy.remove(), 5000);
      }, 1000);

      // Adicionar animação de energia escura
      const darkEnergyStyle = document.createElement("style");
      darkEnergyStyle.textContent = `
            @keyframes darkEnergyFlow {
                0% { 
                    transform: scale(0);
                    opacity: 0;
                }
                50% { 
                    transform: scale(3);
                    opacity: 0.3;
                    background: #330033;
                }
                100% { 
                    transform: scale(0);
                    opacity: 0;
                }
            }
        `;
      document.head.appendChild(darkEnergyStyle);
    </script>
  </body>
</html>
